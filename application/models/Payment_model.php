<?phpdefined('BASEPATH') OR exit('No direct script access allowed');class Payment_model extends CI_Model {		public function getPaymentHistory($userid){         $this->db            ->from('ug_payments')            ->join('ug_profiles', 'ug_profiles.user_id = ug_payments.user_id')            ->where('ug_payments.user_id', $userid)            ->order_by('ug_payments.session', 'desc');        return $this->db->get()->result();    }        public function paymentCurrentSession($userid){        $this->db            ->from('ug_payments')            ->join('ug_profiles', 'ug_profiles.user_id = ug_payments.user_id')            ->where('ug_payments.user_id', $userid)            ->where('ug_payments.session', $_SESSION['active_session']);        return $this->db->get()->row() ? true : false;    }        public function registerPayment($data){        $this->deletePayment([            'user_id' => $data['user_id'],             'type' => $data['type'],              'level' => $data['level'],             'session' => $data['session']        ]);                    $this->db->reset_query();        return $this->db->insert('ug_payments', $data);    }        public function deletePayment($data){        return $this->db->delete('ug_payments', $data);    }    public function updatePaymentStatus($data){        $this->db->set('status', $data['status']);        $this->db->set('orderid', $data['orderid']);        $this->db->set('updated_at', date('Y-m-d H:i:s'));        $this->db->where('rrr', $data['rrr']);        return $this->db->update('ug_payments');    }        public function getPaymentAmount($param){        $this->db		    ->from('ug_fee_item')		    ->join('ug_fees_schedule', 'ug_fee_item.id = ug_fees_schedule.itemid')		    ->join('gen_settings', 'gen_settings.id = ug_fees_schedule.session')		    ->where('ug_fees_schedule.level', $param['level'])		    ->where('gen_settings.session', $param['session'])		    ->where('ug_fees_schedule.programid', $param['programid']);		if($param['level'] == 200){		    $this->db->where('ug_fees_schedule.type', $param['entrymode']);		}		return $this->db->get()->result();    }}